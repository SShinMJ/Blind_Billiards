<mxfile host="Electron" modified="2023-09-09T07:59:47.654Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.8 Chrome/114.0.5735.289 Electron/25.5.0 Safari/537.36" etag="oBH-So9fHRWGibPvldUe" version="21.6.8" type="device">
  <diagram name="페이지-1" id="Z6gSovLF6iSLhtL2SKpG">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000000" pageHeight="200000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="X6ka9UTFI6AbkNywVc9q-2" value="Server" style="whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="200" y="120" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="X6ka9UTFI6AbkNywVc9q-3" target="X6ka9UTFI6AbkNywVc9q-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-3" value="Client" style="whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="40" y="200" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-4" value="Server" style="whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="200" y="200" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-5" value="Client" style="whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="40" y="280" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="X6ka9UTFI6AbkNywVc9q-6" target="X6ka9UTFI6AbkNywVc9q-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-6" value="Server" style="whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="200" y="280" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-7" value="위에서 아래 순" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-8" value="서버 오픈&lt;br&gt;&amp;nbsp;- 서버는 오픈한 후 자기 자신의 서버에 클라이언트도 따로 접속&lt;br&gt;&amp;nbsp;- 서버용 클라이언트에 대한 별도의 동작 정의할 필요 없이 클라 전체에 대한 대응만 존재" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="320" y="110" width="490" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-9" value="클라이언트 접속&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;- 클라이언트는 접속 성공하자마자 자신의 아이디를 서버에 넘김&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="320" y="200" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-11" value="서버가 아이디 중복처리 등 처리 이후 플레이어로 등록" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="320" y="285" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-12" value="구현 필요한 사항" style="swimlane;" parent="1" vertex="1">
          <mxGeometry x="40" y="440" width="760" height="520" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-15" value="새로 등록하는 클라이언트의 동작&lt;br&gt;게임 씬 &amp;gt;&amp;nbsp;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt;&amp;nbsp;clientGetAllPlayerEvent(List&amp;lt;BallEntryPlayerData&amp;gt;) 등록&lt;br&gt;&lt;br&gt;새로 등록한 플레이어는 서버로부터 전체 플레이어의 데이터 목록을 받아서 게임에 넘김&lt;br&gt;게임은 전체 플레이어 목록을 이용해 방에서의 대기목록, 게임에서의 플레이어 공 등을 생성&lt;br&gt;게임 플레이어 저장과 서버의 클라이언트 저장은 서로 다른곳에서 저장, id만 공유됨&lt;br&gt;clientGetAllPlayerEvent 이벤트는 List&amp;lt;BallEntryPlayerData&amp;gt;형식의 자료를 매개변수로 하는 함수만 등록 가능" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="X6ka9UTFI6AbkNywVc9q-12" vertex="1">
          <mxGeometry x="10" y="260" width="690" height="110" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-23" value="서버의 동작&lt;br&gt;게임 씬 &amp;gt;&amp;nbsp;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt;&amp;nbsp;serverEntryNewClientEvent(srting) 등록&lt;br&gt;&lt;br&gt;서버는 새 플레이어를 등록하면서, 나중에 전체 플레이어 리스트를 새 플레이어가 등록할때마다 전달해야 하므로,&lt;br&gt;새 플레이어가 등록될 때마다 전체 플레이어 리스트를 갱신시킬 필요가 있다&lt;br&gt;추가로, 각 플레이어를&amp;nbsp;BallEntryPlayerData 리스트로 관리하면서, 새 플레이어가 등록될 때마다 컬러값도 같이 등록하게 된다&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;TCP_BallGameManagerGetterAdapter.lastPlayer 프로퍼티&lt;/div&gt;&lt;div&gt;TCP_BallGameManagerGetterAdapter.allEntryPlayers 프로퍼티&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;서버는 서버의 게임매니저에게서 다음의 두 프로퍼티를 사용하여 다른 클라이언트에게 자료를 전달하게 된다&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="X6ka9UTFI6AbkNywVc9q-12" vertex="1">
          <mxGeometry x="10" y="30" width="680" height="190" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-24" value="이전에 등록되었던 다른 클라이언트의 동작&lt;br&gt;게임 씬 &amp;gt;&amp;nbsp;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt;&amp;nbsp;clientAddOtherPlayerEvent(BallEntryPlayerData) 등록&lt;br&gt;&lt;br&gt;이전에 등록된 플레이어는 새 플레이어가 등록될 때, 서버에서 해당 플레이어 단일 정보만 전달받는다&lt;br&gt;이외의 부분은 새로 등록하는 클라이언트의 동작과 거의 동일하다" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="X6ka9UTFI6AbkNywVc9q-12" vertex="1">
          <mxGeometry x="10" y="410" width="680" height="90" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-13" value="구현 필요한 사항" style="swimlane;" parent="1" vertex="1">
          <mxGeometry x="930" y="40" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-20" value="class BallEntryPlayerData" style="swimlane;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;arcSize=4;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="440" width="210" height="235" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-21" value="int index&lt;br&gt;공의 순서(턴 진행시 순서)&lt;br&gt;&lt;br&gt;int score&lt;br&gt;점수&lt;br&gt;&lt;br&gt;string id&lt;br&gt;플레이어 id&lt;br&gt;&lt;br&gt;Color color&lt;br&gt;공에 지정된 색상 값" style="align=left;strokeColor=none;fillColor=none;spacingLeft=4;fontSize=12;verticalAlign=top;resizable=0;rotatable=0;part=1;html=1;" parent="X6ka9UTFI6AbkNywVc9q-20" vertex="1">
          <mxGeometry y="50" width="210" height="185" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="X6ka9UTFI6AbkNywVc9q-25" target="X6ka9UTFI6AbkNywVc9q-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-25" value="TCP_BallCore.networkMode&lt;br&gt;해당 변수를 사용하여 서버 컴퓨터의 클라이언트는 별도의 동작을 제어할 수 있다" style="shape=note;size=20;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="195" y="360" width="450" height="50" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-27" value="enum NetworkMode" style="swimlane;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;rounded=1;fontSize=14;fontStyle=0;strokeWidth=2;resizeParent=0;resizeLast=1;shadow=0;dashed=0;align=center;arcSize=4;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="740" width="160" height="180" as="geometry" />
        </mxCell>
        <mxCell id="X6ka9UTFI6AbkNywVc9q-28" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;None&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;솔로&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Client&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;클라이언트&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Server&lt;/div&gt;&lt;div&gt;서버&lt;/div&gt;" style="align=left;strokeColor=none;fillColor=none;spacingLeft=4;fontSize=12;verticalAlign=top;resizable=0;rotatable=0;part=1;html=1;" parent="X6ka9UTFI6AbkNywVc9q-27" vertex="1">
          <mxGeometry y="50" width="160" height="130" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-1" value="방 진입 이후 이벤트 호출됨&lt;br&gt;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt;&amp;nbsp;clientGetAllPlayerEvent(List&amp;lt;BallEntryPlayerData&amp;gt;)&lt;br&gt;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt;&amp;nbsp;clientAddOtherPlayerEvent(BallEntryPlayerData)&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;UI_RoomManager.MakeNew(string id, Color color)&lt;br&gt;방 UI에서 하나의 플레이어 목록을 생성&lt;br&gt;&lt;br&gt;UI_RoomManager.MakeNew(List&amp;lt;BallEntryPlayerData&amp;gt; allPlayerList)&lt;br&gt;방 UI에서 전체 플레이어 목록을 생성" style="shape=note;size=20;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="40" y="1120" width="740" height="160" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-2" value="Client" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1040" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-4" value="Server" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="200" y="1040" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-5" value="서버의 방에 클라이언트 연결됨" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="1045" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-7" value="Server" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="200" y="1360" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-8" value="서버가 연결이 끊긴 클라이언트를 룸 화면에서 대응&lt;br&gt;&amp;nbsp;&amp;gt; 게임매니저에게 플레이어 대기열에서 연결 끊긴 플레이어 정보 전달" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="1360" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-9" value="Client" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1440" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xV1w8VkqLttSeGcpz-uq-10" target="xV1w8VkqLttSeGcpz-uq-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-10" value="Server" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="200" y="1440" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-11" value="서버는 다른 클라이언트에게 클라이언트 디스커넥트 이벤트 송출" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="1445" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-12" value="구현 필요한 사항" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="1600" width="760" height="110" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-13" value="서버, 클라이언트 동작&lt;br&gt;게임 씬 &amp;gt;&amp;nbsp;GameManager 오브젝트 &amp;gt;&amp;nbsp;TCP_BallCommand 컴포넌트 &amp;gt; removeRoomPlayerEvent(List&amp;lt;string&amp;gt;) 등록&lt;br&gt;&lt;br&gt;게임매니저는 이벤트로 전달받은 id값을 바탕으로, 플레이어 대기열에서 해당 플레이어 제거" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="xV1w8VkqLttSeGcpz-uq-12">
          <mxGeometry x="10" y="30" width="630" height="70" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-15" value="Client" style="whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="40" y="1520" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xV1w8VkqLttSeGcpz-uq-16" value="게임 매니저의 플레이어 대기열에서 목록 제거" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="1525" width="270" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
